(()=>{const S=function(e){return new Promise(t=>{var o=document.createElement("script");o.src=e,o.onload=()=>{t()},document.head.appendChild(o)})},P=function(e){return new Promise(t=>{var o=document.createElement("link");o.href=e,o.type="text/css",o.rel="stylesheet",o.onload=()=>{t()},document.head.appendChild(o)})};var N=function(e){for(var t=function(l){for(var n=l.childNodes,i=n.length,u=[],s,y,d,c,m=0;m<i;m++){if(s=n[m],s.nodeType!==1)continue;y=s.children[0],d=y.getAttribute("data-size").split("x"),c={src:y.getAttribute("href"),w:parseInt(d[0],10),h:parseInt(d[1],10)},s.children.length>1&&(c.title=s.children[1].innerHTML),y.children.length>0&&(c.msrc=y.children[0].getAttribute("src")),c.el=s,u.push(c)}return u},o=function l(n,i){return n&&(i(n)?n:l(n.parentNode,i))},r=function(l){l=l||window.event,l.preventDefault?l.preventDefault():l.returnValue=!1;var n=l.target||l.srcElement,i=o(n,function(v){return v.tagName&&v.tagName.toUpperCase()==="FIGURE"});if(!i)return;for(var u=i.parentNode,s=i.parentNode.childNodes,y=s.length,d=0,c,m=0;m<y;m++){if(s[m].nodeType!==1)continue;if(s[m]===i){c=d;break}d++}return c>=0&&p(c,u),!1},a=function(){var l=window.location.hash.substring(1),n={};if(l.length<5)return n;for(var i=l.split("&"),u=0;u<i.length;u++){if(!i[u])continue;var s=i[u].split("=");if(s.length<2)continue;n[s[0]]=s[1]}return n.gid&&(n.gid=parseInt(n.gid,10)),n},p=function(l,n,i,u){var s=document.querySelectorAll(".pswp")[0],y,d,c;if(c=t(n),d={galleryUID:n.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(v){var D=c[v].el.getElementsByTagName("img")[0],I=window.pageYOffset||document.documentElement.scrollTop,x=D.getBoundingClientRect();return{x:x.left,y:x.top+I,w:x.width}}},u)if(d.galleryPIDs){for(var m=0;m<c.length;m++)if(c[m].pid==l){d.index=m;break}}else d.index=parseInt(l,10)-1;else d.index=parseInt(l,10);if(isNaN(d.index))return;i&&(d.showAnimationDuration=0),y=new PhotoSwipe(s,PhotoSwipeUI_Default,c,d),y.init()},h=document.querySelectorAll(e),g=0,w=h.length;g<w;g++)h[g].setAttribute("data-pswp-uid",g+1),h[g].onclick=r;var b=a();b.pid&&b.gid&&p(b.pid,h[b.gid-1],!0,!0)};function T(e){let t=document.createElement("div");t.className="gallery";let o=e[0].parentNode,r=e[0];o.insertBefore(t,r);for(let a=0;a<e.length;++a){const p=e[a].querySelector("img").width,h=e[a].querySelector("img").height;e[a].style.flexGrow=`${p*100/h}`,e[a].style.flexBasis=`${p*240/h}px`,t.appendChild(e[a])}}function A(){const e=[S("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.js"),S("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.js"),P("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.css"),P("https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.min.css")];return Promise.all(e)}function L(e){const t=document.querySelector(e).querySelectorAll("figure");if(t.length){let o=[t[0]];for(let r=1;r<t.length;++r)t[r].previousElementSibling===o[o.length-1]?o.push(t[r]):(T(o),o=[t[r]]);o.length>0&&T(o),A().then(()=>{const r=document.querySelector(".pswp");r.style.removeProperty("display"),N(`${e} .gallery`)})}}let f={};if(localStorage.hasOwnProperty("StackColorsCache"))try{f=JSON.parse(localStorage.getItem("StackColorsCache"))}catch(e){f={}}async function k(e,t,o){if(!e)return await Vibrant.from(o).getPalette();if(!f.hasOwnProperty(e)||f[e].hash!==t){const r=await Vibrant.from(o).getPalette();f[e]={hash:t,Vibrant:{hex:r.Vibrant.hex,rgb:r.Vibrant.rgb,bodyTextColor:r.Vibrant.bodyTextColor},DarkMuted:{hex:r.DarkMuted.hex,rgb:r.DarkMuted.rgb,bodyTextColor:r.DarkMuted.bodyTextColor}},localStorage.setItem("StackColorsCache",JSON.stringify(f))}return f[e]}let M=(e,t=500)=>{e.classList.add("transiting"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",window.setTimeout(()=>{e.classList.remove("show"),e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("transiting")},t)},H=(e,t=500)=>{e.classList.add("transiting"),e.style.removeProperty("display"),e.classList.add("show");let o=e.offsetHeight;e.style.overflow="hidden",e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("transiting")},t)},B=(e,t=500)=>window.getComputedStyle(e).display==="none"?H(e,t):M(e,t);function C(){const e=document.getElementById("toggle-menu");e&&e.addEventListener("click",()=>{if(document.getElementById("main-menu").classList.contains("transiting"))return;document.body.classList.toggle("show-menu"),B(document.getElementById("main-menu"),300),e.classList.toggle("is-active")})}let E={init:()=>{C(),document.querySelector(".article-content")&&L(".article-content"),document.querySelectorAll(".color-tag").forEach(async t=>{const o=t.getAttribute("data-image"),r=t.getAttribute("data-key"),a=t.getAttribute("data-hash"),p=await k(r,a,o);t.style.color=p.Vibrant.bodyTextColor,t.style.background=p.Vibrant.hex});const e=document.querySelector(".article-list--tile");if(e){let t=new IntersectionObserver(async(o,r)=>{o.forEach(a=>{if(!a.isIntersecting)return;r.unobserve(a.target);const p=a.target.querySelectorAll("article.has-image");p.forEach(async h=>{const g=h.querySelector("img"),w=g.src,b=g.getAttribute("data-key"),l=g.getAttribute("data-hash"),n=h.querySelector(".article-details"),i=await k(b,l,w);n.style.background=`
                        linear-gradient(0deg, 
                            rgba(${i.DarkMuted.rgb[0]}, ${i.DarkMuted.rgb[1]}, ${i.DarkMuted.rgb[2]}, 0.5) 0%, 
                            rgba(${i.Vibrant.rgb[0]}, ${i.Vibrant.rgb[1]}, ${i.Vibrant.rgb[2]}, 0.75) 100%)`})})});t.observe(e)}},alert:(e,t=5e3,o=500)=>{const r=document.createElement("div");r.innerHTML=e,r.className="alert",r.style.visibility="hidden",document.body.appendChild(r),r.style.transform=`translateY(${r.clientHeight+50}px)`,r.style.transition=`transform ${o/1e3}s ease`,setTimeout(()=>{r.style.removeProperty("visibility"),r.style.transform="translateY(0)"},o),setTimeout(()=>{r.style.transform=`translateY(${r.clientHeight+50}px)`},o+t),setTimeout(()=>{r.remove()},2*o+t)}};window.addEventListener("load",()=>{setTimeout(function(){E.init()},0)});window.Stack=E;})();
/*!
*   Hugo Theme Stack
*
*   @author: Jimmy Cai
*   @website: https://jimmycai.com
*   @link: https://github.com/CaiJimmy/hugo-theme-stack
*/
